
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rekl	</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .header {
            background: linear-gradient(135deg, rgb(51,141,37) 0%, rgb(147,147,145) 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .header p { font-size: 1.1rem; opacity: 0.9; }

        .header-meta {
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            gap: 2rem;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .board-name, .generation-date {
            margin: 0;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }

        .logo-container {
            display: inline-block;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .logo {
            max-height: 80px;
            width: auto;
            display: block;
        }

        .search-section {
            background: white;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .search-box {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            border: 2px solid #e1e8ed;
            border-radius: 6px;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-box:focus { border-color: rgb(51,141,37); }

        .stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #666;
        }

        /* Cover page styles */
        .cover-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(135deg, rgb(51,141,37) 0%, rgb(147,147,145) 100%);
            color: white;
            page-break-after: always;
        }

        .cover-content {
            max-width: 600px;
            padding: 2rem;
        }

        .cover-logo {
            margin-bottom: 2rem;
            text-align: center;
        }

        .cover-logo img {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .cover-title {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 300;
            text-align: center;
        }

        .cover-subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            font-weight: 300;
            text-align: center;
        }

        .cover-meta {
            margin-top: 3rem;
            font-size: 1.1rem;
            opacity: 0.8;
            text-align: center;
        }

        .cover-meta p {
            margin: 0.5rem 0;
        }

        .cover-actions {
            margin-top: 2rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        /* Document actions */
        .document-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .action-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #f8f9fa;
            border-color: rgb(51,141,37);
        }

        /* Print-specific styles */
        @media print {
            body {
                background: white;
                margin: 0;
                padding: 0;
                font-size: 12pt;
                line-height: 1.4;
            }

            .header {
                background: white !important;
                color: black !important;
                box-shadow: none;
                border-bottom: none !important;
                margin-bottom: 0;
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                page-break-after: always;
                text-align: center;
            }

            .header .container {
                max-width: 600px;
                padding: 2rem;
            }

            .header h1 {
                font-size: 2.5rem !important;
                margin-bottom: 1rem;
                font-weight: bold;
                color: black !important;
            }

            .header p {
                font-size: 1.5rem !important;
                margin-bottom: 2rem;
                opacity: 1;
                font-weight: normal;
                color: black !important;
            }

            .logo-container {
                margin-bottom: 2rem;
            }

            .logo-container img {
                max-width: 200px !important;
                max-height: 150px !important;
                width: auto !important;
                height: auto !important;
                background: white;
                padding: 1rem;
                border-radius: 8px;
                box-shadow: none !important;
                object-fit: contain;
                display: block;
                margin: 0 auto;
            }

            .header-meta {
                color: black !important;
                font-size: 0.9rem !important;
                margin-top: 2rem;
                opacity: 0.8;
                text-align: center;
            }

            .header-meta p {
                margin: 0.25rem 0;
                font-size: 0.9rem !important;
            }

            .board-name, .generation-date {
                color: black !important;
            }

            .search-section {
                display: none;
            }

            .document-actions {
                display: none !important;
            }

            .cover-page {
                background: white !important;
                color: black !important;
                page-break-after: always;
            }

            .cover-logo img {
                box-shadow: none !important;
            }

            .cover-title, .cover-subtitle {
                color: black !important;
            }

            .cover-meta {
                color: black !important;
            }

            .cover-actions {
                display: none !important;
            }

            .document-section {
                page-break-inside: avoid;
                margin-bottom: 2rem;
            }

            .section-header {
                font-size: 18pt;
                color: black !important;
                border-bottom: 2pt solid #333 !important;
                margin: 1.5rem 0 1rem 0;
                page-break-after: avoid;
            }

            .section-number {
                color: black !important;
            }

            .card-item {
                break-inside: avoid;
                margin-bottom: 1.5rem;
                border-left: 1pt solid #333 !important;
            }

            .card-header {
                font-size: 14pt;
                color: black !important;
                page-break-after: avoid;
            }

            .card-number {
                color: black !important;
            }

            .card-title {
                text-decoration: none !important;
                color: black !important;
            }

            .card-meta {
                font-size: 9pt;
            }

            .label {
                background: #f0f0f0 !important;
                color: black !important;
                border: 1pt solid #ccc;
            }

            .card-id {
                background: #f5f5f5 !important;
                color: black !important;
            }

            .card-content {
                font-size: 11pt;
                line-height: 1.5;
            }

            .card-content h3, .card-content h4 {
                color: black !important;
                page-break-after: avoid;
            }

            .special-block {
                border: 1pt solid #333 !important;
                background: #f8f8f8 !important;
                break-inside: avoid;
            }

            .todo-block {
                border-left: 3pt solid #000 !important;
            }

            .note-block, .notes-block {
                border-left: 3pt solid #666 !important;
            }

            .block-header {
                background: #e8e8e8 !important;
                color: black !important;
            }

            .block-content {
                color: black !important;
            }

            .code-block {
                border: 1pt solid #ccc !important;
                background: #f8f8f8 !important;
                break-inside: avoid;
            }

            .inline-code {
                background: #f0f0f0 !important;
                border: 1pt solid #ccc !important;
                color: black !important;
            }

            .page-break-after {
                page-break-after: always;
            }

            .footer {
                border-top: 1pt solid #333;
                margin-top: 2rem;
                font-size: 10pt;
            }

            .card-image {
                max-width: 100%;
                page-break-inside: avoid;
            }

            .comments-section {
                page-break-inside: avoid;
                font-size: 10pt;
            }
        }

        .card-number {
            font-weight: 600;
            color: rgb(51,141,37);
        }

        /* Hierarchical Document Layout */
        .hierarchical-document {
            max-width: none;
            margin: 0;
        }

        .document-section {
            margin-bottom: 3rem;
            page-break-inside: avoid;
        }

        .section-header {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            margin: 2rem 0 1.5rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid rgb(51,141,37);
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
        }

        .section-number {
            color: rgb(51,141,37);
            font-weight: 800;
        }

        .section-title {
            flex: 1;
        }

        .card-item {
            margin-bottom: 2rem;
            padding-left: 1rem;
        }

        .card-header {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-number {
            color: rgb(51,141,37);
            font-weight: 700;
            min-width: 4rem;
        }

        .card-title {
            flex: 1;
            text-decoration: none;
            color: #2d3748;
            transition: color 0.2s;
        }

        .card-title:hover {
            color: rgb(51,141,37);
        }

        .card-meta {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            padding-left: 4.75rem;
        }

        .label {
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            color: white;
            font-weight: 500;
        }

        .card-id {
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            background: #f1f3f4;
            color: #666;
        }

        .card-content {
            padding-left: 4.75rem;
            line-height: 1.7;
        }

        .card-content h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin: 1.5rem 0 0.75rem 0;
        }

        .card-content h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #4a5568;
            margin: 1.25rem 0 0.5rem 0;
        }

        .card-content p {
            margin-bottom: 1rem;
            color: #4a5568;
        }

        .inline-code {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
            font-size: 0.85rem;
            color: #2d3748;
        }

        .code-block {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-left: 4px solid rgb(51,141,37);
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .code-block code {
            background: none;
            border: none;
            padding: 0;
            color: #2d3748;
        }

        /* Special blocks for TODO and Notes */
        .special-block {
            margin: 1.5rem 0;
            border-radius: 6px;
            border-left: 4px solid;
            background: #f8f9fa;
            overflow: hidden;
        }

        .todo-block {
            border-left-color: #f56565;
            background: #fed7d7;
        }

        .note-block, .notes-block {
            border-left-color: #4299e1;
            background: #bee3f8;
        }

        .block-header {
            background: rgba(0,0,0,0.05);
            padding: 0.5rem 1rem;
            font-weight: 700;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .todo-block .block-header {
            color: #c53030;
        }

        .note-block .block-header, .notes-block .block-header {
            color: #2b6cb0;
        }

        .block-content {
            padding: 1rem;
            font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #2d3748;
            white-space: pre-wrap;
        }

        .embedded-image {
            margin: 1.5rem 0;
            text-align: center;
        }

        .card-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #e1e8ed;
        }

        .image-caption {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #666;
            font-style: italic;
        }

        .comments-section {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid #e1e8ed;
        }

        .comments-section h4 {
            margin-bottom: 1rem;
            color: #333;
            font-size: 1rem;
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .comment-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            border-left: 4px solid rgb(51,141,37);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .comment-author {
            font-weight: 600;
            color: #333;
        }

        .comment-date {
            color: #666;
            font-size: 0.8rem;
        }

        .comment-content {
            color: #333;
            line-height: 1.5;
            white-space: pre-wrap;
        }

        .cover-letter-page {
            background: white;
            margin: 2rem 0;
            padding: 3rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .cover-title {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #333;
        }

        .cover-content {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 3rem;
            text-align: left;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .cover-meta {
            color: #666;
            font-size: 0.9rem;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: #666;
            font-size: 0.9rem;
        }

        .no-results {
            text-align: center;
            padding: 3rem;
            color: #666;
            display: none;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .container { padding: 0 0.5rem; }
            .rule-header, .rule-content { padding: 1rem; }
            .card-page-header { flex-direction: column; gap: 1rem; }
        }
    </style>
</head>
<body>
    
    <div class="cover-page">
      <div class="cover-content">
        <div class="cover-logo">
          <img src="public/assets/wostmann_logo.jpg" alt="Logo" style="max-width: 300px; height: auto;">
        </div>
        <h1 class="cover-title">rekl	</h1>
        <h2 class="cover-subtitle">yo yuo</h2>
        <div class="cover-meta">
          <p class="cover-board">Board: Health Benefits Requirements</p>
          <p class="cover-date">Generated: 8/11/2025, 10:54:34 AM</p>
        </div>
        
        <div class="cover-actions">
          <button class="action-btn" onclick="window.print()">🖨️ Print</button>
          <button class="action-btn" onclick="downloadHTML()">💾 Download</button>
        </div>
        
      </div>
    </div>
  
    
    

    <div class="container">
        

        <div id="documentContainer" class="hierarchical-document">
      <div class="document-section" id="section-1">
        <h1 class="section-header">
          <span class="section-number">1.</span>
          <span class="section-title">Phase 5 API Reference</span>
        </h1>
    
        <div class="card-item" data-search="delete pending coverage choice endpoint url: subscriber/rest/coverage-choice/{id} (delete)

this endpoint will mark the coveragechoice record identified by the `id` parameter as deleted.

it will only look for coveragechoice records to delete that are “pending” (i.e., are not already associated with an active coverage record).

it will return successfully (with no result) if it finds the specified coveragechoice and has been able to update the status to “deleted”.  it will return a not found exception if the id parameter doesn’t correspond to a valid pending coveragechoice for the logged in user.

note that the get coverage endpoint has been updated to return the `id` for the pending coveragechoice records.">
          <h2 class="card-header">
            <span class="card-number">1.1</span>
            <a href="https://trello.com/c/IhDLaaH6/554-delete-pending-coverage-choice-endpoint" target="_blank" title="View in Trello" class="card-title">Delete Pending Coverage Choice Endpoint</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#554</span>
          </div>
          <div class="card-content">
            <p>URL: subscriber/rest/coverage-choice/{id} (DELETE)</p><p>This endpoint will mark the CoverageChoice record identified by the <code class="inline-code">id</code> parameter as deleted.</p><p>It will only look for CoverageChoice records to delete that are “pending” (i.e., are not already associated with an active Coverage record).</p><p>It will return successfully (with no result) if it finds the specified CoverageChoice and has been able to update the status to “Deleted”.  It will return a Not Found Exception if the id parameter doesn’t correspond to a valid pending CoverageChoice for the logged in user.</p><p>Note that the Get Coverage endpoint has been updated to return the <code class="inline-code">id</code> for the pending CoverageChoice records.</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="save coverage choices service url: subscriber/rest/coverage-choice/selections (post)

this endpoint should be called to submit subscriber coverage choice selections to the backend, which will validate them and return the id for the created coverage choice record if successful.  if there were validation errors, the service will return a 400 response code (bad request), and the body will contain a json object with a “validationerrors” property that will have an array of the error messages (strings).

the service expects a json object in the post payload with the following information:

```
choicecriteria:
  bargainingunitid
  partfulltime (p/f)
  coveragechangereasonid
  eventdate
  hasdependents (boolean - nullable)
benefitselections: [ coveragechoicebenefitselection ]
  benefittypeid
  selectedbenefitoptionid
  electedmonthlyrate (nullable)
  optoutcertified (boolean - nullable/optional)
```">
          <h2 class="card-header">
            <span class="card-number">1.2</span>
            <a href="https://trello.com/c/EuOOFpxj/443-save-coverage-choices-service" target="_blank" title="View in Trello" class="card-title">Save Coverage Choices Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#443</span>
          </div>
          <div class="card-content">
            <p>URL: subscriber/rest/coverage-choice/selections (POST)</p><p>This endpoint should be called to submit subscriber coverage choice selections to the backend, which will validate them and return the ID for the created Coverage Choice record if successful.  If there were validation errors, the service will return a 400 response code (Bad Request), and the body will contain a JSON object with a “validationErrors” property that will have an array of the error messages (strings).</p><p>The service expects a JSON object in the POST payload with the following information:</p><p><pre class="code-block"><code><br>choiceCriteria:<br>  bargainingUnitId<br>  partFullTime (P/F)<br>  coverageChangeReasonId<br>  eventDate<br>  hasDependents (boolean - nullable)<br>benefitSelections: [ CoverageChoiceBenefitSelection ]<br>  benefitTypeId<br>  selectedBenefitOptionId<br>  electedMonthlyRate (nullable)<br>  optOutCertified (boolean - nullable/optional)<br></code></pre>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin save coverage choices service url: rest/coverage-choice/subscriber/{subscriberaccountid}/selections (post)

this endpoint should be called by the admin ui to allow the drb staff to submit subscriber coverage choice selections to the backend for the subscriber specified by the `subscriberaccountid`, which will validate them and return the id for the created coverage choice record if successful.  if there were validation errors, the service will return a 400 response code (bad request), and the body will contain a json object with a "validationerrors" property that will have an array of the error messages (strings).

the service expects a json object in the post payload with the following information:

```
choicecriteria:
  bargainingunitid
  partfulltime (p/f)
  coveragechangereasonid
  eventdate
  hasdependents (boolean - nullable)
  healtheligible (boolean - nullable)
adminoverridecriteria: (optional object that maps to java type admincoveragechoiceoverrideinput)
  coveragestartdate (string in mm/dd/yyyy format - nullable)
  optoutcertificationdate (string in mm/dd/yyyy format - nullable)
  receiveddate (string in mm/dd/yyyy format - nullable)
  staffnotes (string - nullable)
  autoapprove (boolean - nullable)
  coveragechoiceid (string, will be changed to numeric at later release - nullable)
benefitselections: [ coveragechoicebenefitselection ]
  benefittypeid
  selectedbenefitoptionid
  electedmonthlyrate (nullable)
coverageregenparams: (optional object that maps to java type coverageregenparamsinput)
  lookbackstartdate (string in mm/dd/yyyy format)
  changestartdate (string in mm/dd/yyyy format)
  movecoveragestartdate (boolean)
```

this endpoint works similarly to the corresponding endpoint for the subscriber ui, but does not require sending the `optoutcertified` flag with each `benefitselection`.  instead, it has an optional `adminoverridecriteria` parameter that allows the opt out override date that was entered by drb staff to be sent as the `optoutcertificationdate` to be used for every benefit selection that the backend determines requires an opt-out.

additionally, the optional `receiveddate` and `staffnotes` parameters can be provided to populate that metadata in the coveragechoice.

the `coveragestartdate` override should be used when the “coverage override by staff” change reason is chosen (id 18).

the `autoapprove` override should be set based on whether the user has opted to also approve coverage choices when they have picked a change reason that requires staff approval (should be a checkbox option in the ui that conditionally displays when they pick one of these change reasons – e.g., “change in marital status”).  this override can be omitted / set to null for other change reasons.">
          <h2 class="card-header">
            <span class="card-number">1.3</span>
            <a href="https://trello.com/c/BBFivrKp/582-admin-save-coverage-choices-service" target="_blank" title="View in Trello" class="card-title">Admin Save Coverage Choices Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Admin App</span>
            <span class="card-id">#582</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/subscriber/{subscriberAccountId}/selections (POST)</p><p>This endpoint should be called by the Admin UI to allow the DRB Staff to submit subscriber coverage choice selections to the backend for the subscriber specified by the <code class="inline-code">subscriberAccountId</code>, which will validate them and return the ID for the created Coverage Choice record if successful.  If there were validation errors, the service will return a 400 response code (Bad Request), and the body will contain a JSON object with a "validationErrors" property that will have an array of the error messages (strings).</p><p>The service expects a JSON object in the POST payload with the following information:</p><p><pre class="code-block"><code><br>choiceCriteria:<br>  bargainingUnitId<br>  partFullTime (P/F)<br>  coverageChangeReasonId<br>  eventDate<br>  hasDependents (boolean - nullable)<br>  healthEligible (boolean - nullable)<br>adminOverrideCriteria: (optional object that maps to Java type AdminCoverageChoiceOverrideInput)<br>  coverageStartDate (string in MM/DD/YYYY format - nullable)<br>  optOutCertificationDate (string in MM/DD/YYYY format - nullable)<br>  receivedDate (string in MM/DD/YYYY format - nullable)<br>  staffNotes (string - nullable)<br>  autoApprove (boolean - nullable)<br>  coverageChoiceId (string, will be changed to numeric at later release - nullable)<br>benefitSelections: [ CoverageChoiceBenefitSelection ]<br>  benefitTypeId<br>  selectedBenefitOptionId<br>  electedMonthlyRate (nullable)<br>coverageRegenParams: (optional object that maps to Java type CoverageRegenParamsInput)<br>  lookbackStartDate (string in MM/DD/YYYY format)<br>  changeStartDate (string in MM/DD/YYYY format)<br>  moveCoverageStartDate (boolean)<br></code></pre></p><p>This endpoint works similarly to the corresponding endpoint for the Subscriber UI, but does not require sending the <code class="inline-code">optOutCertified</code> flag with each <code class="inline-code">benefitSelection</code>.  Instead, it has an optional <code class="inline-code">adminOverrideCriteria</code> parameter that allows the opt out override date that was entered by DRB Staff to be sent as the <code class="inline-code">optOutCertificationDate</code> to be used for every benefit selection that the backend determines requires an opt-out.</p><p>Additionally, the optional <code class="inline-code">receivedDate</code> and <code class="inline-code">staffNotes</code> parameters can be provided to populate that metadata in the CoverageChoice.</p><p>The <code class="inline-code">coverageStartDate</code> override should be used when the “Coverage Override by Staff” change reason is chosen (ID 18).</p><p>The <code class="inline-code">autoApprove</code> override should be set based on whether the user has opted to also approve coverage choices when they have picked a change reason that requires staff approval (should be a checkbox option in the UI that conditionally displays when they pick one of these change reasons – e.g., “Change in Marital Status”).  This override can be omitted / set to null for other change reasons.</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="validate coverage choices / determine opt-out service this service performs initial validation on proposed coverage choices, and identifies which opt-out choices require that the ui present the user with the waiver certification.

url: subscriber/rest/coverage-choice/validate (post)

this endpoint should be called to submit subscriber coverage choice selections to the backend, and it will validate them and return an object specified below that indicates whether the opt-out certification step/modal should be shown to the user and indicates for each benefit selection whether that benefit requires an opt-out.  the `certificationdescription` field of each of the benefitselections that have a true value for `optoutcerificationrequired` should be presented to the user as a list in the ui component that presents the opt-out certification language to the user.

the optional `hasdependents` parameter should be used for the new subscriber workflow so that the business rules can be applied correctly based on the user’s response to the dependents question.  it will be ignored for existing subscribers (the system will enforce the rules based on the dependent information that is on file with the jdms system).

if there were validation errors (unrelated to the fact that the opt-out certification has not yet been satisfied), then the service will return a 400 response code (bad request), and the body will contain a json object with a “validationerrors” property that will have an array of the error messages (strings).

the service expects a json object in the post payload with the following information:

```
choicecriteria:
  bargainingunitid
  partfulltimeindicator (p/f)
  coveragechangereasonid
  eventdate
  hasdependents (boolean - nullable)
benefitselections: [ coveragechoicebenefitselection ]
  benefittypeid
  selectedbenefitoptionid
  electedmonthlyrate (nullable)
```

the service will return a json object with the following information (note that [ ] denotes an array of objects):

```
optoutcertificationrequired (boolean)
benefitselections: [ benefitselectionoptoutrequirement ]
  benefittypeid
  optoutcerificationrequired (boolean)
  certificationdescription
```">
          <h2 class="card-header">
            <span class="card-number">1.4</span>
            <a href="https://trello.com/c/vpL2Ifzt/419-validate-coverage-choices-determine-opt-out-service" target="_blank" title="View in Trello" class="card-title">Validate Coverage Choices / Determine Opt-Out Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Service Layer</span> <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#419</span>
          </div>
          <div class="card-content">
            <p>This service performs initial validation on proposed coverage choices, and identifies which opt-out choices require that the UI present the user with the waiver certification.</p><p>URL: subscriber/rest/coverage-choice/validate (POST)</p><p>This endpoint should be called to submit subscriber coverage choice selections to the backend, and it will validate them and return an object specified below that indicates whether the opt-out certification step/modal should be shown to the user and indicates for each benefit selection whether that benefit requires an opt-out.  The <code class="inline-code">certificationDescription</code> field of each of the benefitSelections that have a true value for <code class="inline-code">optOutCerificationRequired</code> should be presented to the user as a list in the UI component that presents the opt-out certification language to the user.</p><p>The optional <code class="inline-code">hasDependents</code> parameter should be used for the New Subscriber workflow so that the business rules can be applied correctly based on the user’s response to the dependents question.  It will be ignored for Existing Subscribers (the system will enforce the rules based on the dependent information that is on file with the JDMS system).</p><p>If there were validation errors (unrelated to the fact that the opt-out certification has not yet been satisfied), then the service will return a 400 response code (Bad Request), and the body will contain a JSON object with a “validationErrors” property that will have an array of the error messages (strings).</p><p>The service expects a JSON object in the POST payload with the following information:</p><p><pre class="code-block"><code><br>choiceCriteria:<br>  bargainingUnitId<br>  partFullTimeIndicator (P/F)<br>  coverageChangeReasonId<br>  eventDate<br>  hasDependents (boolean - nullable)<br>benefitSelections: [ CoverageChoiceBenefitSelection ]<br>  benefitTypeId<br>  selectedBenefitOptionId<br>  electedMonthlyRate (nullable)<br></code></pre></p><p>The service will return a JSON object with the following information (note that [ ] denotes an array of objects):</p><p><pre class="code-block"><code><br>optOutCertificationRequired (boolean)<br>benefitSelections: [ BenefitSelectionOptOutRequirement ]<br>  benefitTypeId<br>  optOutCerificationRequired (boolean)<br>  certificationDescription<br></code></pre>
          </div>
          
        </div>
      
        <div class="card-item" data-search="get subscriber account service url: subscriber/rest/subscriber-account

based on the session information (myalaskaid, employmentid), provide the employee information. that should include:

- last name
- first name
- middle name
- ssn
- birth date
- contact phone
- contact email
- accepted terms date
- employmentid - null if a new subscriber
- subscriberaccountid - null if totally new subscriber - never seen before
- haspendingchoices - true of subscriber has made choices which are not activated yet (mostly useful only for new subscribers so ui can detect whether initial coverage workflow should be shown or not)

if the person is active (i.e employmentid not null), then the information would come from the employment table. otherwise it will come from the subscriber account table. if unknown, then return blank values for the values and a null for subscriberaccountid.

even if the person is active, the contact phone/email will still need to come from the the subscriber account table.">
          <h2 class="card-header">
            <span class="card-number">1.5</span>
            <a href="https://trello.com/c/dgGyEsqW/415-get-subscriber-account-service" target="_blank" title="View in Trello" class="card-title">Get Subscriber Account Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#415</span>
          </div>
          <div class="card-content">
            <p>URL: subscriber/rest/subscriber-account</p><p>Based on the session information (myAlaskaId, employmentId), provide the employee information. That should include:</p><p>- Last Name<br>- First Name<br>- Middle Name<br>- SSN<br>- Birth Date<br>- Contact Phone<br>- Contact Email<br>- Accepted Terms Date<br>- employmentId - NULL if a new subscriber<br>- subscriberAccountId - NULL if totally new subscriber - never seen before<br>- hasPendingChoices - true of subscriber has made choices which are not activated yet (mostly useful only for new subscribers so UI can detect whether initial coverage workflow should be shown or not)</p><p>If the person is active (i.e employmentId not null), then the information would come from the Employment table. Otherwise it will come from the Subscriber Account table. If unknown, then return blank values for the values and a NULL for subscriberAccountId.</p><p>Even if the person is active, the contact Phone/Email will still need to come from the the Subscriber Account table.</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="get coverage change reason options service url: subscriber/rest/codes/coveragechangereasons

this service will provide the list of allowed coverage change reasons for the current employee.

this service will return an array of json objects with the following properties:

- coveragechangereasonid
- title

the initial version of this service should return a list of all reasons from hard coded values.

the final version if this service may consider a number of factors to decide which reasons are allowed. the open enrollment option is one known factor. the final version will also retrieve the reasons from the database.">
          <h2 class="card-header">
            <span class="card-number">1.6</span>
            <a href="https://trello.com/c/HXJV7U3A/444-get-coverage-change-reason-options-service" target="_blank" title="View in Trello" class="card-title">Get Coverage Change Reason Options Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#444</span>
          </div>
          <div class="card-content">
            <p>URL: subscriber/rest/codes/coverageChangeReasons</p><p>This service will provide the list of allowed coverage change reasons for the current employee.</p><p>This service will return an array of JSON Objects with the following properties:</p><p>- coverageChangeReasonId<br>- Title</p><p>The initial version of this service should return a list of all reasons from hard coded values.</p><p>The final version if this service may consider a number of factors to decide which reasons are allowed. The open enrollment option is one known factor. The final version will also retrieve the reasons from the database.</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="get current employment info service url: subscriber/rest/subscriber-account/current-status

based on the session information, get the employmentid associated with the current subscriber and use that to get the record from the employment_status table for that employmentid with the most recent effective date:

the relevant fields for the frontend are:

‌

- bargaining unit id
- part full time indicator
- health eligible indicator">
          <h2 class="card-header">
            <span class="card-number">1.7</span>
            <a href="https://trello.com/c/AFjomJcE/536-get-current-employment-info-service" target="_blank" title="View in Trello" class="card-title">Get Current Employment Info Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#536</span>
          </div>
          <div class="card-content">
            <p>URL: subscriber/rest/subscriber-account/current-status</p><p>Based on the session information, get the employmentId associated with the current subscriber and use that to get the record from the employment_status table for that employmentId with the most recent effective date:</p><p>The relevant fields for the frontend are:</p><p>‌</p><p>- Bargaining Unit Id<br>- Part Full Time Indicator<br>- Health Eligible Indicator</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin get coverage choice options service # specifications for rest api

url: rest/coverage-choice/subscriber/{subscriberaccountid}

this service will provide a set of coverage options and costs for the subscriber with the `subscriberaccountid` specified in the url, so drb staff can make elections for that subscriber.

the following information/parameters must be provided:

- bargainingunitid
- partfulltime (p/f)
- coveragechangereasonid
- eventdate
- hasdependents (boolean – nullable)
- healtheligible (boolean – nullable)

the only change from the subscriber ui endpoint is the addition of the optional `healtheligible` parameter, which will allows the drb staff to modify coverage for non-ak eligible members.  it also supports the full range of bargaining units.  if criteria is provided that specifies a non-alaskacare-eligible position, the backend will return the response below, but the `benefits` array will be empty.  the ui needs to handle this, and then submit an empty array to the submission endpoint for the backend to set up a non-eligible coverage segment (benefit package 100).

this service will return a json object with the following information (note the response is the same as the corresponding endpoint for the subscriber ui):

```
benefitinfourl
dependentsindicator (y/n)
benefits: [ benefit ]
  benefittypeid
  benefittypetitle
  selectedbenefitoptionid (selected/default)
  minmonthlyrate (only for hfsa)
  maxmonthlyrate (only for hfsa)
  electedmonthlyrate (only for hfsa)
  benefitoptions: [ benefit option ]
      benefitoptionid
      benefitplanid (nullable)
      benefitplantitle (nullable)
      benefitlevelid (nullable)
      benefitleveltitle (nullable)
      monthlycost (null for hfsa)
      defaultoptionindicator
```

‌

benefit type

```
1	medical
2	dental
3	vision
4	hfsa
```

benefit plan

```
benefit   benefit
plan_id   type_id	title
101       1         medical – consumer choice
102       1	        medical – economy
103       1	        medical – standard
201       2	        dental – economy
202       2	        dental – standard
301       3	        vision – managed care
401       4	        hfsa
```

benefit level

```
benefit_level_id	title
1	                employee only
2	                employer and family
20                  no streamlining
21                  with streamlining
```">
          <h2 class="card-header">
            <span class="card-number">1.8</span>
            <a href="https://trello.com/c/bbhV1fPr/581-admin-get-coverage-choice-options-service" target="_blank" title="View in Trello" class="card-title">Admin Get Coverage Choice Options Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Admin App</span>
            <span class="card-id">#581</span>
          </div>
          <div class="card-content">
            <h3>Specifications for Rest API</h3><p>URL: rest/coverage-choice/subscriber/{subscriberAccountId}</p><p>This service will provide a set of coverage options and costs for the subscriber with the <code class="inline-code">subscriberAccountId</code> specified in the URL, so DRB staff can make elections for that subscriber.</p><p>The following information/parameters must be provided:</p><p>- bargainingUnitId<br>- partFullTime (P/F)<br>- coverageChangeReasonId<br>- eventDate<br>- hasDependents (boolean – nullable)<br>- healthEligible (boolean – nullable)</p><p>The only change from the Subscriber UI endpoint is the addition of the optional <code class="inline-code">healthEligible</code> parameter, which will allows the DRB staff to modify coverage for non-AK eligible members.  It also supports the full range of Bargaining Units.  If criteria is provided that specifies a non-AlaskaCare-eligible position, the backend will return the response below, but the <code class="inline-code">benefits</code> array will be empty.  The UI needs to handle this, and then submit an empty array to the submission endpoint for the backend to set up a non-eligible Coverage segment (Benefit Package 100).</p><p>This service will return a JSON object with the following information (note the response is the same as the corresponding endpoint for the Subscriber UI):</p><p><pre class="code-block"><code><br>benefitInfoUrl<br>dependentsIndicator (Y/N)<br>benefits: [ Benefit ]<br>  benefitTypeId<br>  benefitTypeTitle<br>  selectedBenefitOptionId (selected/default)<br>  minMonthlyRate (only for HFSA)<br>  maxMonthlyRate (only for HFSA)<br>  electedMonthlyRate (only for HFSA)<br>  benefitOptions: [ Benefit Option ]<br>      benefitOptionId<br>      benefitPlanId (nullable)<br>      benefitPlanTitle (nullable)<br>      benefitLevelId (nullable)<br>      benefitLevelTitle (nullable)<br>      monthlyCost (null for HFSA)<br>      defaultOptionIndicator<br></code></pre></p><p>‌</p><p>Benefit Type</p><p><pre class="code-block"><code><br>1	Medical<br>2	Dental<br>3	Vision<br>4	HFSA<br></code></pre></p><p>Benefit Plan</p><p><pre class="code-block"><code><br>benefit   benefit<br>plan_id   type_id	title<br>101       1         Medical – Consumer Choice<br>102       1	        Medical – Economy<br>103       1	        Medical – Standard<br>201       2	        Dental – Economy<br>202       2	        Dental – Standard<br>301       3	        Vision – Managed Care<br>401       4	        HFSA<br></code></pre></p><p>Benefit Level</p><p><pre class="code-block"><code><br>benefit_level_id	title<br>1	                Employee Only<br>2	                Employer and Family<br>20                  No Streamlining<br>21                  With Streamlining<br></code></pre>
          </div>
          
        </div>
      
        <div class="card-item" data-search="get coverage choice options service # specifications for rest api

url: subscriber/rest/coverage-choice

this service will provide a set of coverage options and costs so the user can make elections.

the following information/parameters must be provided:

- bargainingunitid
- partfulltime (p/f)
- coveragechangereasonid
- eventdate
- hasdependents (boolean – nullable)

this service will return a json object with the following information:

```
benefitinfourl
dependentsindicator (y/n)
benefits: [ benefit ]
  benefittypeid
  benefittypetitle
  selectedbenefitoptionid (selected/default)
  minmonthlyrate (only for hfsa)
  maxmonthlyrate (only for hfsa)
  electedmonthlyrate (only for hfsa)
  benefitoptions: [ benefit option ]
      benefitoptionid
      benefitplanid (nullable)
      benefitplantitle (nullable)
      benefitlevelid (nullable)
      benefitleveltitle (nullable)
      monthlycost (null for hfsa)
      defaultoptionindicator
```

‌

benefit type

```
1	medical
2	dental
3	vision
4	hfsa
```

benefit plan

```
benefit   benefit
plan_id   type_id	title
101       1         medical – consumer choice
102       1	        medical – economy
103       1	        medical – standard
201       2	        dental – economy
202       2	        dental – standard
301       3	        vision – managed care
401       4	        hfsa
```

benefit level

```
benefit_level_id	title
1	                employee only
2	                employer and family
20                  no streamlining
21                  with streamlining
```

# specifications for providing results

for the initial version, simply construct an typical response manually using the given object structure.

further specifications will be provided for actual retrieval of values from database.">
          <h2 class="card-header">
            <span class="card-number">1.9</span>
            <a href="https://trello.com/c/7NeFeeGM/417-get-coverage-choice-options-service" target="_blank" title="View in Trello" class="card-title">Get Coverage Choice Options Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#417</span>
          </div>
          <div class="card-content">
            <h3>Specifications for Rest API</h3><p>URL: subscriber/rest/coverage-choice</p><p>This service will provide a set of coverage options and costs so the user can make elections.</p><p>The following information/parameters must be provided:</p><p>- bargainingUnitId<br>- partFullTime (P/F)<br>- coverageChangeReasonId<br>- eventDate<br>- hasDependents (boolean – nullable)</p><p>This service will return a JSON object with the following information:</p><p><pre class="code-block"><code><br>benefitInfoUrl<br>dependentsIndicator (Y/N)<br>benefits: [ Benefit ]<br>  benefitTypeId<br>  benefitTypeTitle<br>  selectedBenefitOptionId (selected/default)<br>  minMonthlyRate (only for HFSA)<br>  maxMonthlyRate (only for HFSA)<br>  electedMonthlyRate (only for HFSA)<br>  benefitOptions: [ Benefit Option ]<br>      benefitOptionId<br>      benefitPlanId (nullable)<br>      benefitPlanTitle (nullable)<br>      benefitLevelId (nullable)<br>      benefitLevelTitle (nullable)<br>      monthlyCost (null for HFSA)<br>      defaultOptionIndicator<br></code></pre></p><p>‌</p><p>Benefit Type</p><p><pre class="code-block"><code><br>1	Medical<br>2	Dental<br>3	Vision<br>4	HFSA<br></code></pre></p><p>Benefit Plan</p><p><pre class="code-block"><code><br>benefit   benefit<br>plan_id   type_id	title<br>101       1         Medical – Consumer Choice<br>102       1	        Medical – Economy<br>103       1	        Medical – Standard<br>201       2	        Dental – Economy<br>202       2	        Dental – Standard<br>301       3	        Vision – Managed Care<br>401       4	        HFSA<br></code></pre></p><p>Benefit Level</p><p><pre class="code-block"><code><br>benefit_level_id	title<br>1	                Employee Only<br>2	                Employer and Family<br>20                  No Streamlining<br>21                  With Streamlining<br></code></pre></p><h3>Specifications for Providing Results</h3><p>For the initial version, simply construct an typical response manually using the given object structure.</p><p>Further specifications will be provided for actual retrieval of values from database.</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="get coverage service (pending, current and future coverage records) url: subscriber/rest/coverage

based on the session information (myalaskaid, employmentid), provide the coverage record that is currently in effect for the subscriber (if any), as well as any future-dated coverage records.

the service will return a json object with the following information (note that <> denotes type for a single object, and [ ] denotes an array of objects):

```
current: < coveragepresentation > (nullable)
  coveragechangereason
  eventdate
  startdate
  enddate
  deductionstartdate
  benefits: [ coveragebenefitpresentation ]
    benefittypeid
    benefittypetitle
    selectedbenefitoptionid
    selectedbenefitoptiontitle
    montlypremium
future: [ coveragepresentation ]
  coveragechangereason
  eventdate
  startdate
  enddate
  deductionstartdate
  benefits: [ coveragebenefitpresentation ]
    benefittypeid
    benefittypetitle
    selectedbenefitoptionid
    selectedbenefitoptiontitle
    montlypremium
pending: [ pendingcoveragepresentation ]
  id
  bargainingunit (string - full title)
  partfulltime (string - p/f)
  overagechangereason (string - full title)
  eventdate (string - mm/dd/yyyy format)
  projectedstartdate (string - mm/dd/yyyy format)
  benefits: [ coveragebenefitpresentation ]
    benefittypeid
    benefittypetitle
    selectedbenefitoptionid
    selectedbenefitoptiontitle
    montlypremium
```

‌

‌

the attached sql file contains a set of statements that can be run to generate coverage and coveragebenefit test data in your local database – it generates the data from existing election/electionbenefit records, so the bert sample data needs to be populated as a prerequisite.">
          <h2 class="card-header">
            <span class="card-number">1.10</span>
            <a href="https://trello.com/c/XwSAloTc/464-get-coverage-service-pending-current-and-future-coverage-records" target="_blank" title="View in Trello" class="card-title">Get Coverage Service (Pending, Current and Future Coverage Records)</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#464</span>
          </div>
          <div class="card-content">
            <p>URL: subscriber/rest/coverage</p><p>Based on the session information (myAlaskaId, employmentId), provide the coverage record that is currently in effect for the subscriber (if any), as well as any future-dated coverage records.</p><p>The service will return a JSON object with the following information (note that <> denotes type for a single object, and [ ] denotes an array of objects):</p><p><pre class="code-block"><code><br>current: < CoveragePresentation > (nullable)<br>  coverageChangeReason<br>  eventDate<br>  startDate<br>  endDate<br>  deductionStartDate<br>  benefits: [ CoverageBenefitPresentation ]<br>    benefitTypeId<br>    benefitTypeTitle<br>    selectedBenefitOptionId<br>    selectedBenefitOptionTitle<br>    montlyPremium<br>future: [ CoveragePresentation ]<br>  coverageChangeReason<br>  eventDate<br>  startDate<br>  endDate<br>  deductionStartDate<br>  benefits: [ CoverageBenefitPresentation ]<br>    benefitTypeId<br>    benefitTypeTitle<br>    selectedBenefitOptionId<br>    selectedBenefitOptionTitle<br>    montlyPremium<br>pending: [ PendingCoveragePresentation ]<br>  id<br>  bargainingUnit (string - full title)<br>  partFullTime (string - P/F)<br>  overageChangeReason (string - full title)<br>  eventDate (string - MM/DD/YYYY format)<br>  projectedStartDate (string - MM/DD/YYYY format)<br>  benefits: [ CoverageBenefitPresentation ]<br>    benefitTypeId<br>    benefitTypeTitle<br>    selectedBenefitOptionId<br>    selectedBenefitOptionTitle<br>    montlyPremium<br></code></pre></p><p>‌</p><p>‌</p><p>The attached SQL file contains a set of statements that can be run to generate Coverage and CoverageBenefit test data in your local database – it generates the data from existing Election/ElectionBenefit records, so the BERT sample data needs to be populated as a prerequisite.</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="get dependents service url: subscriber/rest/dependents

this service will return the list of currently registered dependents for the logged in subscriber, providing the data that is currently displayed in the jdms ui.

this service will return an array of json objects with the following properties:

- name
- status (will be either verified, enrollment pending, changes pending or terminated)
- relationship
- birthdate (string in mm/dd/yyyy format)
- startdate (string in mm/dd/yyyy format)
- enddate (nullable string in mm/dd/yyyy format)

we will likely want to add start date and end date to this, but for now, per drb feedback in the demo, we should start be displaying things similarly to how they show up in jdms.

here is a screenshot example:

![image.png](https://trello.com/1/cards/65f212a08c738a37fcfcf471/attachments/65f2146936c1d7367f63622b/download/image.png)

the source code for this existing ui application is in bitbucket and can be reviewed to see the colors for the different status (we don’t need to mimic the exact look and feel, but should probably be consistent with how we color the 4 different status types that we’ll see).

the source for the individual components displayed above should be accessible here:

[http://doadrbjnu-bit.soa.alaska.gov:7990/projects/dms/repos/dms-ui/browse/src/components/public/member/memberdependentitem.js](http://doadrbjnu-bit.soa.alaska.gov:7990/projects/dms/repos/dms-ui/browse/src/components/public/member/memberdependentitem.js "‌")

also, the `status` component that is used by that component should be a helpful reference.  the main css styles are stored here:

[http://doadrbjnu-bit.soa.alaska.gov:7990/projects/dms/repos/dms-ui/browse/src/styles/styles.scss](http://doadrbjnu-bit.soa.alaska.gov:7990/projects/dms/repos/dms-ui/browse/src/styles/styles.scss "‌")">
          <h2 class="card-header">
            <span class="card-number">1.11</span>
            <a href="https://trello.com/c/tcUZz1E5/504-get-dependents-service" target="_blank" title="View in Trello" class="card-title">Get Dependents Service</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#504</span>
          </div>
          <div class="card-content">
            <p>URL: subscriber/rest/dependents</p><p>This service will return the list of currently registered dependents for the logged in subscriber, providing the data that is currently displayed in the JDMS UI.</p><p>This service will return an array of JSON Objects with the following properties:</p><p>- name<br>- status (will be either Verified, Enrollment Pending, Changes Pending or Terminated)<br>- relationship<br>- birthDate (string in MM/DD/YYYY format)<br>- startDate (string in MM/DD/YYYY format)<br>- endDate (nullable string in MM/DD/YYYY format)</p><p>We will likely want to add start date and end date to this, but for now, per DRB feedback in the demo, we should start be displaying things similarly to how they show up in JDMS.</p><p>Here is a screenshot example:</p><div class="embedded-image"><br>      <img src="https://trello.com/1/cards/65f212a08c738a37fcfcf471/attachments/65f2146936c1d7367f63622b/download/image.png" alt="image.png" class="card-image" loading="lazy"><br>      <div class="image-caption">image.png</div><br>    </div><p>The source code for this existing UI application is in Bitbucket and can be reviewed to see the colors for the different status (we don’t need to mimic the exact look and feel, but should probably be consistent with how we color the 4 different status types that we’ll see).</p><p>The source for the individual components displayed above should be accessible here:</p><p>[http://doadrbjnu-bit.soa.alaska.gov:7990/projects/DMS/repos/dms-ui/browse/src/components/public/member/MemberDependentItem.js](http://doadrbjnu-bit.soa.alaska.gov:7990/projects/DMS/repos/dms-ui/browse/src/components/public/member/MemberDependentItem.js "‌")</p><p>Also, the <code class="inline-code">Status</code> component that is used by that component should be a helpful reference.  The main CSS styles are stored here:</p><p>[http://doadrbjnu-bit.soa.alaska.gov:7990/projects/DMS/repos/dms-ui/browse/src/styles/styles.scss](http://doadrbjnu-bit.soa.alaska.gov:7990/projects/DMS/repos/dms-ui/browse/src/styles/styles.scss "‌")</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="accept terms endpoint post request to: rest/subscriber-account/terms

payload should be:

- subscriberaccountid (number)
- termsaccepted (boolean)">
          <h2 class="card-header">
            <span class="card-number">1.12</span>
            <a href="https://trello.com/c/7QvelpnV/463-accept-terms-endpoint" target="_blank" title="View in Trello" class="card-title">Accept Terms Endpoint</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Subscriber App</span>
            <span class="card-id">#463</span>
          </div>
          <div class="card-content">
            <p>POST request to: rest/subscriber-account/terms</p><p>Payload should be:</p><p>- subscriberAccountId (number)<br>- termsAccepted (boolean)</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin coverage endpoint this card can be used to document the rest endpoint called by the admin ui to retrieve the coverage/coveragechoice data for display in the coverage tab.

## status column

the backend should return the appropriate string for display in the status column based on the following logic:

- if there is a coverage record, then return “active”
- otherwise, there is just a coveragechoice record, so look at the coveragechoicestatusid
  - if it is `2 - approved by staff` then return “approved, but pending employment data”
  - if it is `3 - staff approval not needed` then return “pending employment data”
  - else, return the `title` column from the coveragechoicestatus table

## source column

the backend should return the appropriate string for display in the source column based on the following logic:

- if there is a coverage record, then use the coveragesourceid and return the `title` column for the appropriate record in the coveragesource table
- otherwise, there is just a coveragechoice record, so use the coveragechoicesourceid and then return the following string:
  - “coverage choice - `[title]`" where `[title]` should be replaced with `title` column for the matching record in the coveragechoicesource table">
          <h2 class="card-header">
            <span class="card-number">1.13</span>
            <a href="https://trello.com/c/cgaTEHuY/547-admin-coverage-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Coverage Endpoint</a>
          </h2>
          <div class="card-meta">
            <span class="label" style="background-color: #999">Admin App</span>
            <span class="card-id">#547</span>
          </div>
          <div class="card-content">
            <p>This card can be used to document the REST endpoint called by the Admin UI to retrieve the Coverage/CoverageChoice data for display in the Coverage tab.</p><h3>Status Column</h3><p>The backend should return the appropriate string for display in the Status column based on the following logic:</p><p>- If there is a Coverage record, then return “Active”<br>- Otherwise, there is just a CoverageChoice record, so look at the CoverageChoiceStatusId<br>  - If it is <code class="inline-code">2 - Approved by Staff</code> then return “Approved, but Pending Employment Data”<br>  - If it is <code class="inline-code">3 - Staff Approval Not Needed</code> then return “Pending Employment Data”<br>  - Else, return the <code class="inline-code">title</code> column from the CoverageChoiceStatus table</p><h3>Source Column</h3><p>The backend should return the appropriate string for display in the Source column based on the following logic:</p><p>- If there is a Coverage record, then use the CoverageSourceId and return the <code class="inline-code">title</code> column for the appropriate record in the CoverageSource table<br>- Otherwise, there is just a CoverageChoice record, so use the CoverageChoiceSourceId and then return the following string:<br>  - “Coverage Choice - <code class="inline-code">[title]</code>" where <code class="inline-code">[title]</code> should be replaced with <code class="inline-code">title</code> column for the matching record in the CoverageChoiceSource table</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin update staff notes endpoint url: rest/coverage-choice/staff-notes/{coveragechoiceid}

this endpoint accepts a put request, with a path parameter representing the id of the coverage choice whose staff notes should be revised, as well as a coverageitem object which includes the new staff notes value.

after updating the staff notes of a coverage on the frontend and saving, the method will be invoked passing the coveragechoiceid of that coverage to the backend, with the coverage object itself (which conforms to the coverageitem) interface in the body of the request

the method does not return a value">
          <h2 class="card-header">
            <span class="card-number">1.14</span>
            <a href="https://trello.com/c/6w3MOMIy/609-admin-update-staff-notes-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Update Staff Notes Endpoint</a>
          </h2>
          <div class="card-meta">
            
            <span class="card-id">#609</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/staff-notes/{coverageChoiceId}</p><p>This endpoint accepts a PUT request, with a path parameter representing the id of the coverage choice whose staff notes should be revised, as well as a CoverageItem object which includes the new staff notes value.</p><p>After updating the staff notes of a coverage on the frontend and saving, the method will be invoked passing the coverageChoiceId of that coverage to the backend, with the coverage object itself (which conforms to the CoverageItem) interface in the body of the request</p><p>The method does not return a value</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin approve coverage choice endpoint url: rest/coverage-choice/approve/{coveragechoiceid}

this endpoint accepts a put request, with a path parameter representing the id of the coverage choice to be approved. the body of the request is a nullable object with the following interface

```
string lookbackstartdate; (mm/dd/yyyy formatted)
string changestartdate; (mm/dd/yyyy formatted)
boolean movecoveragestartdate;
```

to be clear, if no body is present in the request, the method will be invoked successfully. if there is a body in the request, all three fields should be present on it.
the method does not return a value">
          <h2 class="card-header">
            <span class="card-number">1.15</span>
            <a href="https://trello.com/c/0KKWws4x/610-admin-approve-coverage-choice-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Approve Coverage Choice Endpoint</a>
          </h2>
          <div class="card-meta">
            
            <span class="card-id">#610</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/approve/{coverageChoiceId}</p><p>This endpoint accepts a PUT request, with a path parameter representing the id of the coverage choice to be approved. The body of the request is a nullable object with the following interface</p><p><pre class="code-block"><code><br>String lookbackStartDate; (MM/DD/YYYY formatted)<br>String changeStartDate; (MM/DD/YYYY formatted)<br>Boolean moveCoverageStartDate;<br></code></pre></p><p>To be clear, if no body is present in the request, the method will be invoked successfully. If there is a body in the request, all three fields should be present on it.<br>The method does not return a value</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin reject coverage choice endpoint url: rest/coverage-choice/reject/{coveragechoiceid}

this endpoint accepts a put request, with a path parameter representing the id of the coverage choice to be rejected. no additional parameters are supplied.

the method does not return a value">
          <h2 class="card-header">
            <span class="card-number">1.16</span>
            <a href="https://trello.com/c/xlatOMJ3/611-admin-reject-coverage-choice-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Reject Coverage Choice Endpoint</a>
          </h2>
          <div class="card-meta">
            
            <span class="card-id">#611</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/reject/{coverageChoiceId}</p><p>This endpoint accepts a PUT request, with a path parameter representing the id of the coverage choice to be rejected. No additional parameters are supplied.</p><p>The method does not return a value</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin reset coverage choice endpoint url: rest/coverage-choice/reset/{coveragechoiceid}

this endpoint accepts a put request, with a path parameter representing the id of the coverage choice to be reset (in the case of undo approval/rejection). the body of the request is a nullable object with the following interface

```
string lookbackstartdate; (mm/dd/yyyy formatted)
string changestartdate; (mm/dd/yyyy formatted)
boolean movecoveragestartdate;
```

to be clear, if no body is present in the request, the method will be invoked successfully. if there is a body in the request, all three fields should be present on it.
the method does not return a value">
          <h2 class="card-header">
            <span class="card-number">1.17</span>
            <a href="https://trello.com/c/68yaaCDa/612-admin-reset-coverage-choice-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Reset Coverage Choice Endpoint</a>
          </h2>
          <div class="card-meta">
            
            <span class="card-id">#612</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/reset/{coverageChoiceId}</p><p>This endpoint accepts a PUT request, with a path parameter representing the id of the coverage choice to be reset (in the case of undo approval/rejection). The body of the request is a nullable object with the following interface</p><p><pre class="code-block"><code><br>String lookbackStartDate; (MM/DD/YYYY formatted)<br>String changeStartDate; (MM/DD/YYYY formatted)<br>Boolean moveCoverageStartDate;<br></code></pre></p><p>To be clear, if no body is present in the request, the method will be invoked successfully. If there is a body in the request, all three fields should be present on it.<br>The method does not return a value</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin undelete coverage choice endpoint url: rest/coverage-choice/undelete/{coveragechoiceid}

this endpoint accepts a put request, with a path parameter representing the id of the coverage choice to be undeleted. the body of the request is a nullable object with the following interface

```
string lookbackstartdate; (mm/dd/yyyy formatted)
string changestartdate; (mm/dd/yyyy formatted)
boolean movecoveragestartdate;
```

to be clear, if no body is present in the request, the method will be invoked successfully. if there is a body in the request, all three fields should be present on it.
the method does not return a value">
          <h2 class="card-header">
            <span class="card-number">1.18</span>
            <a href="https://trello.com/c/1QjSg1g2/613-admin-undelete-coverage-choice-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Undelete Coverage Choice Endpoint</a>
          </h2>
          <div class="card-meta">
            
            <span class="card-id">#613</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/undelete/{coverageChoiceId}</p><p>This endpoint accepts a PUT request, with a path parameter representing the id of the coverage choice to be undeleted. The body of the request is a nullable object with the following interface</p><p><pre class="code-block"><code><br>String lookbackStartDate; (MM/DD/YYYY formatted)<br>String changeStartDate; (MM/DD/YYYY formatted)<br>Boolean moveCoverageStartDate;<br></code></pre></p><p>To be clear, if no body is present in the request, the method will be invoked successfully. If there is a body in the request, all three fields should be present on it.<br>The method does not return a value</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin delete coverage choice endpoint url: rest/coverage-choice/delete/{coveragechoiceid}

this endpoint accepts a put request, with a path parameter representing the id of the coverage choice to be deleted. the body of the request is a nullable object with the following interface

```
string lookbackstartdate; (mm/dd/yyyy formatted)
string changestartdate; (mm/dd/yyyy formatted)
boolean movecoveragestartdate;
```

to be clear, if no body is present in the request, the method will be invoked successfully. if there is a body in the request, all three fields should be present on it.
the method does not return a value">
          <h2 class="card-header">
            <span class="card-number">1.19</span>
            <a href="https://trello.com/c/d5a3WvgZ/614-admin-delete-coverage-choice-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Delete Coverage Choice Endpoint</a>
          </h2>
          <div class="card-meta">
            
            <span class="card-id">#614</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/delete/{coverageChoiceId}</p><p>This endpoint accepts a PUT request, with a path parameter representing the id of the coverage choice to be deleted. The body of the request is a nullable object with the following interface</p><p><pre class="code-block"><code><br>String lookbackStartDate; (MM/DD/YYYY formatted)<br>String changeStartDate; (MM/DD/YYYY formatted)<br>Boolean moveCoverageStartDate;<br></code></pre></p><p>To be clear, if no body is present in the request, the method will be invoked successfully. If there is a body in the request, all three fields should be present on it.<br>The method does not return a value</p>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin get coverage regen params endpoint url: rest/coverage-choice/regen-params

this endpoint accepts a post request. the body of the request is a nullable object with the following interface

```
string coveragechoiceid; (nullable)
string eventdate; (mm/dd/yyyy formatted, nullable)
```

either of these fields can be nullable. in other words, the frontend can pass nothing in the request body, or an object with either of these fields, both, or neither.

the method returns a value with the following interface

```
	string lookbackstartdate;
	string changestartdate;
	yesnoindicator movecoveragestartdate;
```">
          <h2 class="card-header">
            <span class="card-number">1.20</span>
            <a href="https://trello.com/c/cFzRlCfH/615-admin-get-coverage-regen-params-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Get Coverage Regen Params Endpoint</a>
          </h2>
          <div class="card-meta">
            
            <span class="card-id">#615</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/regen-params</p><p>This endpoint accepts a POST request. The body of the request is a nullable object with the following interface</p><p><pre class="code-block"><code><br>String coverageChoiceId; (nullable)<br>String eventDate; (MM/DD/YYYY formatted, nullable)<br></code></pre></p><p>Either of these fields can be nullable. In other words, the frontend can pass nothing in the request body, or an object with either of these fields, both, or neither.</p><p>The method returns a value with the following interface</p><p><pre class="code-block"><code><br>	String lookbackStartDate;<br>	String changeStartDate;<br>	YesNoIndicator moveCoverageStartDate;<br></code></pre>
          </div>
          
        </div>
      
        <div class="card-item" data-search="admin regenerate coverage for subscriber endpoint url: rest/coverage-choice/regen/{subscriberaccountid}

this endpoint accepts a post request, with a path parameter representing the id of the subscriber account for whom coverage regeneration should be performed. the body of the request is a nullable object with the following interface

```
string lookbackstartdate; (mm/dd/yyyy formatted)
string changestartdate; (mm/dd/yyyy formatted)
boolean movecoveragestartdate;
```

to be clear, if no body is present in the request, the method will be invoked successfully. if there is a body in the request, all three fields should be present on it.

the method does not return a value.">
          <h2 class="card-header">
            <span class="card-number">1.21</span>
            <a href="https://trello.com/c/kRoOC4un/616-admin-regenerate-coverage-for-subscriber-endpoint" target="_blank" title="View in Trello" class="card-title">Admin Regenerate Coverage For Subscriber Endpoint</a>
          </h2>
          <div class="card-meta">
            
            <span class="card-id">#616</span>
          </div>
          <div class="card-content">
            <p>URL: rest/coverage-choice/regen/{subscriberAccountId}</p><p>This endpoint accepts a POST request, with a path parameter representing the ID of the subscriber account for whom coverage regeneration should be performed. The body of the request is a nullable object with the following interface</p><p><pre class="code-block"><code><br>String lookbackStartDate; (MM/DD/YYYY formatted)<br>String changeStartDate; (MM/DD/YYYY formatted)<br>Boolean moveCoverageStartDate;<br></code></pre></p><p>To be clear, if no body is present in the request, the method will be invoked successfully. If there is a body in the request, all three fields should be present on it.</p><p>The method does not return a value.</p>
          </div>
          
        </div>
      </div></div>

        <div class="no-results" id="noResults">
            <h3>No cards found</h3>
            <p>Try adjusting your search terms</p>
        </div>
    </div>

    <div class="footer">
        <p>Generated from Trello Board: Health Benefits Requirements</p>
        <p>Lists: Phase 5 API Reference</p>
        
    </div>

    <script>

    const searchBox = document.getElementById('searchBox');
    const documentContainer = document.getElementById('documentContainer');
    const resultCount = document.getElementById('resultCount');
    const noResults = document.getElementById('noResults');
    const allCards = document.querySelectorAll('.card-item');
    const allSections = document.querySelectorAll('.document-section');

    if (searchBox && searchBox.addEventListener) {
        searchBox.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            let visibleCount = 0;

            if (searchTerm === '') {
                // Show all cards and sections
                allCards.forEach(card => card.style.display = 'block');
                allSections.forEach(section => section.style.display = 'block');
                visibleCount = allCards.length;
            } else {
                // Hide all sections first
                allSections.forEach(section => section.style.display = 'none');

                // Check each card
                allCards.forEach(card => {
                    const searchData = card.getAttribute('data-search') || '';
                    if (searchData.includes(searchTerm)) {
                        card.style.display = 'block';
                        // Show the parent section
                        const parentSection = card.closest('.document-section');
                        if (parentSection) {
                            parentSection.style.display = 'block';
                        }
                        visibleCount++;
                    } else {
                        card.style.display = 'none';
                    }
                });
            }

            if (resultCount) {
                resultCount.textContent = visibleCount + ' card' + (visibleCount !== 1 ? 's' : '') + ' found';
            }

            if (visibleCount === 0) {
                if (noResults) noResults.style.display = 'block';
                if (documentContainer) documentContainer.style.display = 'none';
            } else {
                if (noResults) noResults.style.display = 'none';
                if (documentContainer) documentContainer.style.display = 'block';
            }
        });
    }
  

        // Download HTML function
        function downloadHTML() {
            // Create a complete HTML document
            const fullHTML = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${document.title}</title>
</head>
<body>
    ${document.documentElement.outerHTML}
</body>
</html>`;

            // Download the file
            const blob = new Blob([fullHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'documentation.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Print optimization
        if (window && window.addEventListener) {
            window.addEventListener('beforeprint', function() {
                // Ensure all cards are visible for printing
                const allCards = document.querySelectorAll('.rule-card');
                allCards.forEach(card => {
                    card.style.display = 'block';
                });
            });
        }
    </script>
</body>
</html>